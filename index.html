<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>小王子的世界</title>
  <style>
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
        font-family: 'HarmonyOS Sans', 'PingFang SC', 'Microsoft YaHei', Arial, sans-serif;
        background: var(--bg-gradient, linear-gradient(120deg,#bdb2ff 0%,#a0c4ff 100%));
        color: #232946;
        min-height: 100vh;
        box-sizing: border-box;
      }
      body {
  background: linear-gradient(135deg, #232946 0%, #1a1a2e 100%);
  transition: background 1.2s cubic-bezier(.23,1.02,.32,1);
}
body.bg1 { background: linear-gradient(135deg, #232946 0%, #1a1a2e 100%); }
body.bg2 { background: linear-gradient(120deg, #1e3c72 0%, #2a5298 100%); }
body.bg3 { background: linear-gradient(135deg, #232946 0%, #bdb2ff 100%); }
body.bg4 { background: linear-gradient(120deg, #232946 0%, #a0c4ff 100%); }
body.bg5 { background: linear-gradient(135deg, #232946 0%, #f8b500 100%); }

.header-fixed {
  position: fixed;
  top: 0; left: 0; width: 100vw;
  z-index: 100;
  background: rgba(34, 39, 63, 0.98);
  box-shadow: 0 2px 16px #23294622;
  padding: 14px 0 8px 0;
  backdrop-filter: blur(2px);
  display: flex;
  flex-direction: column;
  align-items: center;
  border-bottom-left-radius: 24px;
  border-bottom-right-radius: 24px;
}
.header-fixed h1 {
  color: #fffbe7;
  font-size: 2.1rem;
  text-align: center;
  margin: 0 0 4px 0;
  letter-spacing: 1px;
}
.header-fixed p {
  color: #fffbe7;
  font-size: 1.08rem;
  text-align: center;
  margin: 0;
}

.container {
        margin: 0 auto;
        margin-top: 90px;
        max-width: 680px;
        width: 98vw;
        min-height: 60vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        padding: 0 8px 32px 8px;
        box-sizing: border-box;
      }

h2 {
  display: none;
}
#preview {
  display: flex;
  flex-direction: column;
  gap: 0px;
  margin: 0 auto;
  max-width: 100vw;
  width: 100%;
  align-items: center;
}
.timeline {
        width: 100%;
        max-width: 600px;
        margin: 0 auto;
        background: rgba(255,255,255,0.12);
        border-radius: 18px;
        box-shadow: 0 2px 16px #23294622;
        padding: 0 0 0 0;
        min-height: 320px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }
.timeline-item {
  width: 100%;
  margin: 0 auto;
  display: flex;
  flex-direction: row;
  align-items: flex-start;
  justify-content: center;
  min-width: 0;
}
.timeline-dot {
  display: none;
}
.timeline-content {
  margin-left: 0;
  flex: 1;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  min-width: 0;
}
.timeline-date {
  position: static;
  color: #bdb2ff;
  font-size: 1.18rem;
  font-family: 'Segoe Script', 'Segoe UI', cursive, sans-serif;
  letter-spacing: 1px;
  background: rgba(34,39,63,0.92);
  padding: 2px 16px 2px 8px;
  border-radius: 16px;
  box-shadow: 0 2px 8px #23294622;
  min-width: 90px;
  text-align: left;
  z-index: 3;
  margin-bottom: 8px;
}
.card {
        background: rgba(255,255,255,0.92);
        border-radius: 18px;
        box-shadow: 0 2px 16px #23294622;
        padding: 32px 24px 24px 24px;
        margin: 0 auto 18px auto;
        max-width: 520px;
        width: 98%;
        min-height: 220px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        font-size: 1.18rem;
        transition: box-shadow 0.2s;
      }
.photo-card, .mood-card {
  background: linear-gradient(120deg, #232946 60%, #393e6c 100%);
  border-radius: 26px;
  box-shadow: 0 6px 24px rgba(160,196,255,0.10);
  padding: 32px 24px 22px 24px;
  display: flex;
  flex-direction: column;
  align-items: center;
  max-width: 540px;
  min-width: 0;
  margin: 0 auto;
  border: 1.5px solid #a0c4ff;
}
.photo-card img {
  max-width: 420px;
  max-height: 320px;
  border-radius: 18px;
  box-shadow: 0 2px 16px rgba(255,193,7,0.10);
  border: 2px solid #a0c4ff;
  margin-bottom: 18px;
  background: #232946;
}
.photo-card .desc, .mood-card .desc {
  color: #a0c4ff;
  font-size: 1.22rem;
  text-align: center;
  max-width: 420px;
  word-break: break-all;
  font-family: 'Segoe Print', 'Segoe UI', cursive, sans-serif;
  margin-bottom: 8px;
}
.photo-card .pub-date, .mood-card .pub-date {
  color: #bdb2ff;
  font-size: 1.08rem;
  margin-top: 10px;
  font-family: 'Segoe UI', Arial, sans-serif;
  text-align: right;
  width: 100%;
}
.stars {
  position: fixed;
  left: 0; top: 0; width: 100vw; height: 100vh;
  pointer-events: none;
  z-index: 0;
}
.star {
  position: absolute;
  width: 2.5px; height: 2.5px;
  background: #fffbe7;
  border-radius: 50%;
  opacity: 0.7;
  animation: twinkle 2.5s infinite ease-in-out;
}
@keyframes twinkle {
  0%,100% { opacity: 0.7; }
  50% { opacity: 0.2; }
}
@media (max-width: 900px) {
  .container { max-width: 99vw; }
  .timeline { max-width: 99vw; }
  .photo-card, .mood-card { max-width: 96vw; }
  .photo-card img { max-width: 92vw; max-height: 48vw; }
  .photo-card .desc, .mood-card .desc { max-width: 92vw; }
}
@media (max-width: 700px) {
  .header-fixed { border-radius: 0; padding: 12px 0 6px 0; }
  .header-fixed h1 { font-size: 1.45rem; }
  .header-fixed p { font-size: 0.98rem; }
  .container { max-width: 100vw; padding: 0 0vw; border-radius: 0; margin-top: 80px; }
  #preview { max-width: 100vw; }
  .timeline { max-width: 100vw; min-height: 220px; }
  .photo-card, .mood-card { max-width: 99vw; padding: 12px 2vw 10px 2vw; }
  .photo-card img { max-width: 96vw; max-height: 52vw; }
  .photo-card .desc, .mood-card .desc { font-size: 1.05rem; }
}
  </style>
  <!-- 星空背景 -->
  <div class="stars" id="stars"></div>
  <!-- 小王子SVG装饰 -->
  <svg class="nature-decor little-prince" width="120" height="220" viewBox="0 0 120 220" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g>
      <ellipse cx="60" cy="210" rx="38" ry="10" fill="#bdb2ff" opacity="0.18"/>
      <circle cx="60" cy="70" r="38" fill="#ffe082" stroke="#f8b500" stroke-width="2"/>
      <ellipse cx="60" cy="120" rx="32" ry="50" fill="#f8b500"/>
      <ellipse cx="60" cy="120" rx="28" ry="44" fill="#ffe082"/>
      <ellipse cx="60" cy="120" rx="18" ry="30" fill="#fffbe7"/>
      <!-- 头发 -->
      <ellipse cx="60" cy="55" rx="20" ry="10" fill="#f8b500"/>
      <!-- 脸部 -->
      <ellipse cx="60" cy="75" rx="15" ry="15" fill="#fffbe7"/>
      <!-- 眼睛 -->
      <ellipse cx="54" cy="78" rx="2.2" ry="2.2" fill="#232946"/>
      <ellipse cx="66" cy="78" rx="2.2" ry="2.2" fill="#232946"/>
      <!-- 微笑 -->
      <path d="M55 85 Q60 90 65 85" stroke="#232946" stroke-width="1.2" fill="none"/>
      <!-- 围巾 -->
      <rect x="44" y="90" width="32" height="10" rx="5" fill="#bdb2ff"/>
      <rect x="70" y="95" width="18" height="6" rx="3" fill="#bdb2ff" transform="rotate(15 70 95)"/>
      <!-- 身体 -->
      <rect x="50" y="100" width="20" height="50" rx="10" fill="#a0c4ff"/>
      <!-- 手臂 -->
      <rect x="30" y="110" width="18" height="6" rx="3" fill="#ffe082" transform="rotate(-20 30 110)"/>
      <rect x="72" y="110" width="18" height="6" rx="3" fill="#ffe082" transform="rotate(20 72 110)"/>
      <!-- 腿 -->
      <rect x="54" y="150" width="6" height="30" rx="3" fill="#bdb2ff"/>
      <rect x="60" y="150" width="6" height="30" rx="3" fill="#bdb2ff"/>
    </g>
  </svg>
  <!-- 自然装饰SVG -->
  <svg class="nature-decor nature-leaf" width="160" height="120" viewBox="0 0 160 120" fill="none" xmlns="http://www.w3.org/2000/svg">
    <ellipse cx="80" cy="60" rx="80" ry="60" fill="#a5d6a7"/>
    <path d="M80 60 Q100 20 140 40 Q120 80 80 60 Z" fill="#66bb6a"/>
  </svg>
  <svg class="nature-decor nature-cloud" width="200" height="90" viewBox="0 0 200 90" fill="none" xmlns="http://www.w3.org/2000/svg">
    <ellipse cx="60" cy="60" rx="60" ry="30" fill="#b3e5fc"/>
    <ellipse cx="120" cy="50" rx="50" ry="25" fill="#b3e5fc"/>
    <ellipse cx="170" cy="70" rx="30" ry="15" fill="#b3e5fc"/>
  </svg>
</head>
<body>
    <div class="header-fixed" style="position:fixed;top:0;left:0;width:100vw;z-index:100;background:rgba(34,39,63,0.98);box-shadow:0 2px 16px #23294622;padding:14px 0 8px 0;backdrop-filter:blur(2px);">
      <h1 style="margin-bottom:4px;font-size:2.1rem;letter-spacing:1px;">小王子的世界</h1>
      <p style="margin:0;font-size:1.08rem;color:#fffbe7;">欢迎来到我的个人博客！这里你可以浏览我分享的照片和心情。<br>“所有的大人都曾经是小孩，虽然，只有少数的人记得。”</p>
    </div>
    <div class="container" style="margin-top:90px;">
      <h2 style="display:none">我的照片分享</h2>
      <div id="preview">
        <div class="timeline" id="timeline" style="width:100%;cursor:pointer;"></div>
      </div>
    </div>
    <!-- 背景音乐播放器 -->
    <audio id="bgm" src="https://lzhimagebed.xyz/%E9%99%88%E5%A5%95%E8%BF%85%20-%20%E6%B7%98%E6%B1%B0.mp3" loop preload="auto" style="display:none"></audio>
    <button id="musicToggle" title="音乐开关" style="position:fixed;top:24px;right:32px;z-index:120;background:none;border:none;outline:none;cursor:pointer;padding:0;display:flex;align-items:center;justify-content:center;">
      <svg id="icon-music-on" width="36" height="36" viewBox="0 0 36 36" fill="none" style="display:block;"><circle cx="18" cy="18" r="17" fill="#bdb2ff" opacity="0.22"/><path d="M10 22h4l6 5V9l-6 5h-4v8z" fill="#a0c4ff" stroke="#232946" stroke-width="1.5"/><path d="M25 13c1.5 1.5 1.5 8.5 0 10" stroke="#232946" stroke-width="2" fill="none"/></svg>
      <svg id="icon-music-off" width="36" height="36" viewBox="0 0 36 36" fill="none" style="display:none;"><circle cx="18" cy="18" r="17" fill="#bdb2ff" opacity="0.22"/><path d="M10 22h4l6 5V9l-6 5h-4v8z" fill="#a0c4ff" stroke="#232946" stroke-width="1.5"/><line x1="12" y1="12" x2="24" y2="24" stroke="#ff5252" stroke-width="2.5"/></svg>
    </button>
    <div class="stars" id="stars"></div>
    <svg class="nature-decor little-prince" width="120" height="220" viewBox="0 0 120 220" fill="none" xmlns="http://www.w3.org/2000/svg">
      <g>
        <ellipse cx="60" cy="210" rx="38" ry="10" fill="#bdb2ff" opacity="0.18"/>
        <circle cx="60" cy="70" r="38" fill="#ffe082" stroke="#f8b500" stroke-width="2"/>
        <ellipse cx="60" cy="120" rx="32" ry="50" fill="#f8b500"/>
        <ellipse cx="60" cy="120" rx="28" ry="44" fill="#ffe082"/>
        <ellipse cx="60" cy="120" rx="18" ry="30" fill="#fffbe7"/>
        <ellipse cx="60" cy="55" rx="20" ry="10" fill="#f8b500"/>
        <ellipse cx="60" cy="75" rx="15" ry="15" fill="#fffbe7"/>
        <ellipse cx="54" cy="78" rx="2.2" ry="2.2" fill="#232946"/>
        <ellipse cx="66" cy="78" rx="2.2" ry="2.2" fill="#232946"/>
        <path d="M55 85 Q60 90 65 85" stroke="#232946" stroke-width="1.2" fill="none"/>
        <rect x="44" y="90" width="32" height="10" rx="5" fill="#bdb2ff"/>
        <rect x="70" y="95" width="18" height="6" rx="3" fill="#bdb2ff" transform="rotate(15 70 95)"/>
        <rect x="50" y="100" width="20" height="50" rx="10" fill="#a0c4ff"/>
        <rect x="30" y="110" width="18" height="6" rx="3" fill="#ffe082" transform="rotate(-20 30 110)"/>
        <rect x="72" y="110" width="18" height="6" rx="3" fill="#ffe082" transform="rotate(20 72 110)"/>
        <rect x="54" y="150" width="6" height="30" rx="3" fill="#bdb2ff"/>
        <rect x="60" y="150" width="6" height="30" rx="3" fill="#bdb2ff"/>
      </g>
    </svg>
    <svg class="nature-decor nature-leaf" width="160" height="120" viewBox="0 0 160 120" fill="none" xmlns="http://www.w3.org/2000/svg">
      <ellipse cx="80" cy="60" rx="80" ry="60" fill="#a5d6a7"/>
      <path d="M80 60 Q100 20 140 40 Q120 80 80 60 Z" fill="#66bb6a"/>
    </svg>
    <svg class="nature-decor nature-cloud" width="200" height="90" viewBox="0 0 200 90" fill="none" xmlns="http://www.w3.org/2000/svg">
      <ellipse cx="60" cy="60" rx="60" ry="30" fill="#b3e5fc"/>
      <ellipse cx="120" cy="50" rx="50" ry="25" fill="#b3e5fc"/>
      <ellipse cx="170" cy="70" rx="30" ry="15" fill="#b3e5fc"/>
    </svg>
  </div>
  <!-- 自然装饰SVG -->
  <svg class="nature-decor nature-leaf" width="160" height="120" viewBox="0 0 160 120" fill="none" xmlns="http://www.w3.org/2000/svg">
    <ellipse cx="80" cy="60" rx="80" ry="60" fill="#a5d6a7"/>
    <path d="M80 60 Q100 20 140 40 Q120 80 80 60 Z" fill="#66bb6a"/>
  </svg>
  <svg class="nature-decor nature-cloud" width="200" height="90" viewBox="0 0 200 90" fill="none" xmlns="http://www.w3.org/2000/svg">
    <ellipse cx="60" cy="60" rx="60" ry="30" fill="#b3e5fc"/>
    <ellipse cx="120" cy="50" rx="50" ry="25" fill="#b3e5fc"/>
    <ellipse cx="170" cy="70" rx="30" ry="15" fill="#b3e5fc"/>
  </svg>
  <style>
  /* ...existing styles... */
  .timeline { cursor: pointer; min-height: 220px; }
  .timeline-item { transition: opacity 0.5s, transform 0.5s; }
  .timeline-item.hide { opacity: 0; transform: scale(0.96) translateY(30px); pointer-events: none; }
  .timeline-item.show { opacity: 1; transform: scale(1) translateY(0); pointer-events: auto; }
  </style>
  <script>
  // 星空背景生成
  (function(){
    const starCount = 80;
    const stars = document.getElementById('stars');
    for(let i=0;i<starCount;i++){
      const s = document.createElement('div');
      s.className = 'star';
      s.style.left = Math.random()*100+'vw';
      s.style.top = Math.random()*100+'vh';
      s.style.animationDelay = (Math.random()*2.5)+'s';
      stars.appendChild(s);
    }
  })();

  // 分页参数
  let currentIndex = 0;
  let allPhotos = [];
  // 自动加载 desc.json 并渲染图片和描述（仅一条，支持左右切换）
  async function loadPhotos() {
    const timeline = document.getElementById('timeline');
    timeline.innerHTML = '';
    try {
      const resp = await fetch('desc.json');
      if (!resp.ok) throw new Error('desc.json 加载失败');
      const data = await resp.json();
      let photos = [];
      if (Array.isArray(data)) {
        photos = data;
      } else if (data && Array.isArray(data.days)) {
        data.days.forEach(day => {
          if (Array.isArray(day.items)) {
            day.items.forEach(item => {
              photos.push({ ...item, date: day.date, dayTitle: day.title || '', dayDesc: day.desc || '' });
            });
          }
        });
      } else {
        throw new Error('desc.json 格式错误');
      }
      allPhotos = photos;
      renderCurrent();
    } catch (e) {
      timeline.innerHTML = '<div style="color:#c00;text-align:center;width:100%">无法加载 desc.json，<br>请确保通过本地服务器访问（如 VSCode Live Server、Python SimpleHTTPServer 等），否则浏览器安全策略会阻止读取本地文件。<br>错误信息：'+e.message+'</div>';
      allPhotos = [];
    }
  }
  function renderCurrent() {
    const timeline = document.getElementById('timeline');
    timeline.innerHTML = '';
    if (!allPhotos.length) {
      timeline.innerHTML = '<div style="color:#888;text-align:center;width:100%">暂无照片，请在 images/ 目录添加图片并编辑 desc.json</div>';
      return;
    }
    if (currentIndex < 0) currentIndex = 0;
    if (currentIndex >= allPhotos.length) currentIndex = allPhotos.length - 1;
    const item = allPhotos[currentIndex];
    const itemWrap = document.createElement('div');
    itemWrap.className = 'timeline-item show';
    const dot = document.createElement('div');
    dot.className = 'timeline-dot';
    itemWrap.appendChild(dot);
    const content = document.createElement('div');
    content.className = 'timeline-content';
    // 日期大号显示在左上
    if(item.date) {
      const date = document.createElement('div');
      date.className = 'timeline-date';
      date.textContent = formatDate(item.date);
      content.appendChild(date);
    }
    // 天标题/描述
    if(item.dayTitle) {
      const t = document.createElement('div');
      t.style.cssText = 'color:#bdb2ff;font-size:1.12rem;font-family:Segoe Script,Segoe UI,cursive;margin-bottom:2px;';
      t.textContent = item.dayTitle;
      content.appendChild(t);
    }
    if(item.dayDesc) {
      const d = document.createElement('div');
      d.style.cssText = 'color:#a0c4ff;font-size:1.01rem;margin-bottom:6px;';
      d.textContent = item.dayDesc;
      content.appendChild(d);
    }
    let card;
    if(item.type === 'image' || (!item.type && item.src && /\.(jpg|jpeg|png|gif|webp)$/i.test(item.src))) {
      card = document.createElement('div');
      card.className = 'photo-card';
      const img = document.createElement('img');
      img.src = item.src;
      img.alt = item.desc || '';
      img.loading = 'lazy';
      card.appendChild(img);
    } else if(item.type === 'video' || (item.src && /\.(mp4|webm|ogg)$/i.test(item.src))) {
      card = document.createElement('div');
      card.className = 'photo-card';
      const video = document.createElement('video');
      video.src = item.src;
      video.controls = true;
      video.style.maxWidth = '180px';
      video.style.maxHeight = '180px';
      video.style.borderRadius = '18px';
      video.style.background = '#f1f8e9';
      card.appendChild(video);
    } else if(item.type === 'text' && !item.src) {
      card = document.createElement('div');
      card.className = 'mood-card';
    } else {
      card = document.createElement('div');
      card.className = 'photo-card';
    }
    if(item.desc) {
      const desc = document.createElement('div');
      desc.className = 'desc';
      desc.textContent = item.desc;
      card.appendChild(desc);
    }
    // 可选：显示 tags
    if(item.tags && item.tags.length) {
      const tags = document.createElement('div');
      tags.style.cssText = 'margin-top:4px;color:#ffe082;font-size:0.98rem;';
      tags.textContent = '#' + item.tags.join(' #');
      card.appendChild(tags);
    }
    content.appendChild(card);
    itemWrap.appendChild(content);
    timeline.appendChild(itemWrap);
  }
  // 点击 timeline 区域左右切换
  document.addEventListener('DOMContentLoaded', function() {
    const timeline = document.getElementById('timeline');
    timeline.addEventListener('click', function(e) {
      const rect = timeline.getBoundingClientRect();
      const x = e.clientX - rect.left;
      if (x > rect.width / 2) {
        // 右侧，下一条
        if (currentIndex < allPhotos.length - 1) {
          currentIndex++;
          renderCurrent();
        }
      } else {
        // 左侧，上一条
        if (currentIndex > 0) {
          currentIndex--;
          renderCurrent();
        }
      }
    });
  });
  // 音乐开关按钮逻辑
  function updateMusicIcon() {
    var audio = document.getElementById('bgm');
    var on = document.getElementById('icon-music-on');
    var off = document.getElementById('icon-music-off');
    if(audio && !audio.paused) {
      on.style.display = 'block';
      off.style.display = 'none';
    } else {
      on.style.display = 'none';
      off.style.display = 'block';
    }
  }
  document.getElementById('musicToggle').addEventListener('click', function(){
    var audio = document.getElementById('bgm');
    if(audio.paused) {
      audio.play().catch(function(){});
    } else {
      audio.pause();
    }
    updateMusicIcon();
  });
  document.getElementById('bgm').addEventListener('play', updateMusicIcon);
  document.getElementById('bgm').addEventListener('pause', updateMusicIcon);
  // 新增：格式化日期函数
  function formatDate(dateStr) {
    if(!dateStr) return '';
    const d = new Date(dateStr);
    if(isNaN(d)) return dateStr;
    return d.getFullYear() + '-' + String(d.getMonth()+1).padStart(2,'0') + '-' + String(d.getDate()).padStart(2,'0');
  }
  // 自动切换背景
  const bgList = ['bg1','bg2','bg3','bg4','bg5'];
  let bgIdx = 0;
  function switchBg() {
    document.body.classList.remove(...bgList);
    document.body.classList.add(bgList[bgIdx]);
    bgIdx = (bgIdx + 1) % bgList.length;
  }
  switchBg();
  setInterval(switchBg, 12000); // 每12秒切换一次
  loadPhotos();
  </script>
</body>
</html>
